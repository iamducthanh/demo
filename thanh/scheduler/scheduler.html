<html>

<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Basic initialization</title>
    <!-- <script async="" src="//www.google-analytics.com/analytics.js"></script> -->
    <script src="codebasev5/dhtmlxscheduler.js" type="text/javascript" charset="utf-8"></script>
    <link rel="stylesheet" href="codebasev5/dhtmlxscheduler_material.css" type="text/css" charset="utf-8">

    <!-- <link rel="stylesheet" type="text/css" href="dhtmlxscheduler.css"> -->
<!-- <script src="dhtmlxscheduler.js"></script> -->
<script src="dhtmlxscheduler_timeline.js"></script>
    <style>
        html,
        body {
            margin: 0px;
            padding: 0px;
            height: 100%;
            overflow: hidden;
        }
    </style>

    <!-- <script>
        let data = [
            { id: 1, start_date: "2021-04-15 09:00", end_date: "2021-04-15 12:00", text: "English lesson" }, { id: 2, start_date: "2021-04-16 10:00", end_date: "2021-04-16 16:00", text: "Math exam" }, { id: 3, start_date: "2021-04-16 10:00", end_date: "2021-04-21 16:00", text: "Science lesson" }, { id: 4, start_date: "2021-04-17 16:00", end_date: "2021-04-17 17:00", text: "English lesson" }, { id: 5, start_date: "2021-04-18 09:00", end_date: "2021-04-18 17:00", text: "Usual event" }, { id: 6, start_date: "2021-04-19 09:00", end_date: "2021-04-20 12:00", text: "English lesson" }, { id: 7, start_date: "2021-04-20 10:00", end_date: "2021-04-21 16:00", text: "Math exam" }, { id: 8, start_date: "2021-04-21 10:00", end_date: "2021-04-22 16:00", text: "Science lesson" }, { id: 9, start_date: "2021-04-22 16:00", end_date: "2021-04-23 17:00", text: "English lesson" }, { id: 10, start_date: "2021-04-18 09:00", end_date: "2021-04-24 17:00", text: "Usual event" },
        ]
        window.addEventListener("DOMContentLoaded", function () {
            scheduler.init('scheduler_here', new Date(2021, 4, 1), "week");
            scheduler.parse(
                data);
        });
    </script>

    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-11031269-1', 'auto');
        ga('send', 'pageview');
    </script>
    <script src="https://cdn.ravenjs.com/3.10.0/raven.min.js"></script>
    <script>Raven.config('https://b506cc95e6244203a69070d518196d06@sentry.dhtmlx.ru/7').install()</script> -->
</head>

<body>
    <div id="scheduler_here" class="dhx_cal_container" style="width:100%; height:100%;">
        <div class="dhx_cal_navline">
            <div class="dhx_cal_prev_button">&ensp;&ensp;</div>
            <div class="dhx_cal_next_button">&ensp;&ensp;</div>
            <div class="dhx_cal_today_button"></div>
            <div class="dhx_cal_date"></div>
            <div class="dhx_cal_tab" name="month_tab" style="margin-left: -180px;"></div>
            <!-- <div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div>
            <div class="dhx_cal_tab" name="day_tab" style="right:76px;"></div> -->
            <div class="dhx_cal_tab" name="timeline_tab" style="margin-left: -180px;"></div>
            <select name="" id="" class="" style="margin: 15px 0px 0px 300px;">
                <option value="">Thành</option>
                <option value="">Thành</option>
                <option value="">Thành</option>
                <option value="">Thành</option>
              </select>
            <button onclick="addEvent()">Add</button>
        </div>
        <div class="dhx_cal_header">
        </div>
        <div class="dhx_cal_data">
        </div>
    </div>
    <script>
        //## 100 sections and 200 events

scheduler.locale.labels.timeline_tab = "Timeline";
scheduler.locale.labels.section_custom="Section";
scheduler.config.details_on_create=true;
scheduler.config.details_on_dblclick=true;
scheduler.config.xml_date="%Y-%m-%d %H:%i";
scheduler.config.collision_limit = 1;

//===============
//Configuration
//===============
var sections=[];

// 100 sections
for(var i = 1; i < 101; i++){
   sections.push({key:i, label: "section #" + i});
}

var events = [];

var template = [
  { start_date: "2021-06-01 00:00", end_date: "2021-06-03 10:00", text:"AI Team", user: 'Nguyễn Quang Ngọc', mota: 'thanh', color: 'green'},
  { start_date: "2021-06-04 00:00", end_date: "2021-06-10 00:00", text:"BSD", user: 'Nguyễn Quang Ngọc', mota: 'thanh'},
  { start_date: "2021-06-11 00:00", end_date: "2021-06-15 00:00", text:"DaNang", user: 'Nguyễn Quang Ngọc', mota: 'thanh'},
  { start_date: "2021-06-16 00:00", end_date: "2021-06-26 00:00", text:"Task A-23542", user: 'Nguyễn Quang Ngọc', mota: 'thanh'},

//   { start_date: "2021-06-15 00:00", end_date: "2021-06-17 00:00", text:"Task B-48865", section_id:5},
//   { start_date: "2021-06-12 00:00", end_date: "2021-06-13 00:00", text:"Task B-44864", section_id:6},
//   { start_date: "2021-06-18 00:00", end_date: "2021-06-22 00:00", text:"Task B-46558", section_id:7},
//   { start_date: "2021-06-19 00:00", end_date: "2021-06-20 00:00", text:"Task B-45564", section_id:8},

//   { start_date: "2021-06-25 00:00", end_date: "2021-06-26 00:00", text:"Task C-32421", section_id:9},
//   { start_date: "2021-06-14 00:00", end_date: "2021-06-15 00:00", text:"Task C-14244", section_id:10},

//   { start_date: "2021-06-17 00:00", end_date: "2021-06-18 00:00", text:"Task D-52688", section_id:11},
//   { start_date: "2021-06-04 00:00", end_date: "2021-06-05 00:00", text:"Task D-46588", section_id:12},
//   { start_date: "2021-06-29 00:00", end_date: "2021-06-30 00:00", text:"Task D-12458", section_id:13}
];

// 200 events
for(var i = i; i < 200; i++){
  var ev = JSON.parse(JSON.stringify(template[i % template.length]));
  ev.section_id = (i % sections.length) + 1
  ev.id = i;
  events.push(ev);
}


// timeline config
scheduler.attachEvent("onTemplatesReady", function(){
	scheduler.xy.scale_height = 50;
});

var view_name = "timeline";
scheduler.createTimelineView({
	name: view_name,
	x_unit: "day",
	x_date: "%D<br><b>%j</b>",
	x_step: 1,
	x_size: 31,
	section_autoheight: false,
	y_unit:   sections,
	y_property: "section_id",
	render:"bar",
	round_position:true,
	dy:60
});

scheduler.attachEvent("onEventDeleted", function(id,ev){
    console.log(ev);
});

scheduler.attachEvent("onEventSave",function(id,ev,is_new){
    console.log(ev);

    return true;
})

scheduler.attachEvent("onBeforeViewChange", function(old_mode,old_date,mode,date){
	var year = date.getFullYear();
	var month= (date.getMonth() + 1);
	var d = new Date(year, month, 0);
	scheduler.matrix[view_name].x_size = d.getDate();//number of days in month;
	return true;
});
scheduler.date['add_' + view_name] = function(date, step){
	if(step > 0){
		step = 1;
	}else if(step < 0){
		step = -1;
	}
	return scheduler.date.add(date, step, "month")
};
scheduler.date[view_name + '_start'] = scheduler.date.month_start;

//===============
//Data loading
//===============
scheduler.config.lightbox.sections=[
  {name:"Department", height:25, map_to:"text", type:"textarea" , focus:true},
  {name:"custom", height:23, type:"select", options:sections, map_to:"section_id" },
  {name:"time", height:72, type:"time", map_to:"auto"},
  {name:"Người đặt", height:25, type:"textarea", map_to:"user"},
  {name:"Ghi chú", height:100, type:"textarea", map_to:"mota"}

];

scheduler.init('scheduler_here',new Date(2021,5,30),"month");

scheduler.parse(template,"json");

function addEvent() {
    var eventId = scheduler.addEvent({
    start_date: "16-06-2021 09:00",
    end_date:   "18-06-2021 12:00",
    text:   "Meeting",
    section_id:1, user: 'Nguyễn Quang Ngọc', mota: 'thanh'
});
}
    </script>
</body>

</html>